<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
<title>Alshifaa Hospital</title>
<link rel="icon" href="/static/images/logo-ico.png" type="image/ico">
<meta name="keywords" content="LightYear,光年,后台模板,后台管理系统,光年HTML模板">
<meta name="description" content="LightYear是一个基于Bootstrap v3.3.7的后台管理系统的HTML模板。">
<meta name="author" content="yinqi">
<link href="/static/css/bootstrap.min.css" rel="stylesheet">
<link href="/static/css/materialdesignicons.min.css" rel="stylesheet">
<link href="/static/css/style.min.css" rel="stylesheet">
</head>

    <script type="text/javascript">

        setInterval(function () {

            $.get('/getSpeak/', function (data) {
                //获取返回的Json数据
                res = data.data

               direction = $('#direction')
               patientName = $('#patientName')
               departmentName = $('#departmentName')

               for(i=0; i<res.length; i++){
                id = res[i][0]
                patient_name = res[i][1]
                arabic_name = res[i][2]
                english_name = res[i][3]
                patient_id = res[i][4]

                src1='/media/calling/' + patient_id + '.mp3'
                var audio = new Audio(src1);
                audio.play();

                text = ' إلى العِيَادَة ' + arabic_name;

                if (english_name === 'Internal Cardiology - 1'){
                    img = '<img src="/static/images/right.png" alt="">'
                    direction.html(img)
                    departmentName.html(text)
                    patientName.html(patient_name)
                }

                else if (english_name === 'Internal Cardiology - 2'){
                    img = '<img src="/static/images/right.png" alt="">'
                    direction.html(img)
                    departmentName.html(text)
                    patientName.html(patient_name)
                }

                else if (english_name === 'Urology'){
                    img = '<img src="/static/images/right.png" alt="">'
                    direction.html(img)
                    departmentName.html(text)
                    patientName.html(patient_name)
                }

                else if (english_name === 'jaw surgery'){
                    img = '<img src="/static/images/right.png" alt="">'
                    direction.html(img)
                    departmentName.html(text)
                    patientName.html(patient_name)
                }

                else {
                    img = '<img src="/static/images/left.png" alt="">'
                    direction.html(img)
                    departmentName.html(text)
                    patientName.html(patient_name)
                }


                $.ajax({
                    'url': '/stopSpeaking/',
                    'type': 'get',
                    {#headers:{'X-CSRFToken': csrftoken},#}
                    'data': {'id': id},
                    'dataType': 'json',
                })

               var now = new Date();
                var exitTime = now.getTime();
                while (true) {
                    now = new Date();
                    if (now.getTime() > exitTime)
                    return;
                }

              }

            })

        }, 4000);


    </script>

    <style type="text/css">
        .lyear-header {
            position: fixed;
            top: 0;
            right: 0;
            left: 0;
            z-index: 4;
            padding-left: 240px;
            background-color: #fff;
            -webkit-transition: padding 0.3s;
            transition: padding 0.3s;
            -webkit-box-shadow: 4px 0 5px rgba(0, 0, 0, 0.035);
            -moz-box-shadow: 4px 0 5px rgba(0, 0, 0, 0.035);
            box-shadow: 4px 0 5px rgba(0, 0, 0, 0.035);
            {#margin-right: 240px;#}
        }

        .cardCalling {
            {#margin-bottom: 24px;#}
            background-color: #fff;
            {#-webkit-box-shadow: 0 2px 3px rgba(0, 0, 0, 0.035);#}
            {#box-shadow: 0 2px 3px rgba(0, 0, 0, 0.035);#}
            {#margin-right: 235px;#}
            margin-left: -23%;
        }

        td{
            vertical-align: middle;
            text-align: center;
            white-space: nowrap;
            width: 260px;
        }

        th{
            vertical-align: middle;
            text-align: center;
            white-space: nowrap;
            width: 260px;
        }

    </style>

<body>
    <div class="lyear-layout-web">
        <div class="lyear-layout-container">
            <!--左侧导航-->
            <aside class="lyear-layout-sidebar" >
                <!-- logo -->
                <div id="logo" class="sidebar-header">
                    <a href="#"><img src="/static/images/logo.png" title="LightYear" alt="LightYear" /></a>
                </div>
            </aside>
            <!--End 左侧导航-->

            <!--头部信息-->
            <header class="lyear-header">
                <br>
                <h1 style="text-align: center; font-family: Calibri; font-size: 45px; font-weight: bolder">

                                 وَإِذَا مَرِضۡتُ فَهُوَ يَشۡفِينِ
                </h1>

            </header>
            <!--End 头部信息-->
            <br>
            <!--页面主要内容-->
            <main class="lyear-layout-content">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="cardCalling">
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table" border="0" style="width:100%; table-layout:fixed;">
                                            <tr style="height: 300px">
                                                <th style="font-family: Calibri; font-size: 110px;">
                                                    <div id="direction"></div>
                                                    <div id="patientName"></div>
                                                    <div id="departmentName" style="font-size: 100px"></div>
                                                </th>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
            <!--End 页面主要内容-->
        </div>
    </div>

    <script src="/static/js/jquery-1.12.4.min.js"></script>
    <script type="text/javascript" src="/static/js/jquery.min.js"></script>
    <script type="text/javascript" src="/static/js/bootstrap.min.js"></script>

</body>
</html>